<h1 class="sub-header">Riepilogo</h1>

<div class="mt-5">
  <h2>Strategie attive</h2>
  <table class="table-responsive">
    <tr>
      <th class="text-center">Stato</th>
      <th>Nome</th>
      <th class="hidden-column">Scambio</th>
      <th class="hidden-column">BTC iniziali</th>
      <th class="hidden-column">BTC attuali</th>
      <th class="hidden-column">Buy Price</th>
      <th class="hidden-column">Sell Price</th>
      <th >Data</th>
      <th>STOP</th>
    </tr>
    <tr   *ngFor="let str of activeStrategies; let $index =index; ">
      <td class="text-center">
        <span (click)="openConfirmModal($index)" class="d-sm-block d-md-none">INFO</span>
        <span class="d-none d-lg-block">
        <span [ngClass]="{'run': str.status == 'ACTIVE' ,'stop':str.status != 'ACTIVE'}"  class="dot"></span>
      </span>
      </td>
      <td>{{str.name}}</td>
      <td class="hidden-column">{{str.coin_pair}}</td>
      <td class="hidden-column">{{str.capital}}</td>
      <td class="hidden-column">{{str.capital}}</td>
      <td class="hidden-column">{{str.buy_price.toFixed(8)}}</td>
      <td class="hidden-column">{{str.sell_price.toFixed(8)}}</td>
      <td >{{str.date | date}}</td>
      <td><button (click)="openStopModal($index)" class="btn btn-danger">STOP</button></td>
    </tr>
  </table>
  <modal id="edit-modal" #detailsModal>
    <div class="app-modal-header"><h3>Dettagli: </h3></div>
    <div class="app-modal-body" *ngIf="checkMobileData">
      <p>{{checkMobileData.name}}</p>
      <p>{{checkMobileData.coin_pair}}</p>
      <p>{{checkMobileData.capital}}</p>
      <p>{{checkMobileData.capital}}</p>
      <p>{{checkMobileData.buy_price.toFixed(8)}}</p>
      <p>{{checkMobileData.sell_price.toFixed(8)}}</p>
      <p>{{checkMobileData.date}}</p>
    </div>
  </modal>
  <modal id="stop-modal" #stopModal>
      <div class="app-modal-header"><h3>STOP </h3></div>
      <div class="app-modal-body">
        <div class="text-center">
          <h2 *ngIf="stopData">Stai fermando {{stopData.name}}</h2>
          <h2>Conferma !!</h2>
        </div>
        <button class="btn btn-danger float-left" (click)="closeStop()">CHIUDI</button>
        <button class="btn start-btn float-right" (click)="cancelStrategy(stopData.name)">STOP </button>
      </div>
  </modal>
</div>
